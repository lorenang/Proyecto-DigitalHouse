<!DOCTYPE html>
<html lang="es">
<%- include('../partials/head.ejs') %>
<body>
    <%- include('../partials/header.ejs') %>
    <%- include('../partials/search.ejs') %>
    <main>
        <section class="productos">
            <div class="div_title">
                <h1>Lista de Productos</h1>
            </div>
            <div class="div-products">
                <table>
                    <thead>
                        <th>Categoria</th>
                        <th>Imagen</th>
                        <th>Nombre</th>
                        <th>Descripcion</th>
                        <th>Precio</th>
                        <th>Stock</th>
                        <th>Acciones</th>
                    </thead>
                    <tbody>
                        <% productosdata.forEach(product => { %>
                            <tr>
                                <td><%= product.categoria.categoria_descripcion %></td>
                                <td><img src="/images/<%= product.producto_imagen %>" alt="<%= product.producto_imagen %>" class="product-image"></td>
                                <td><%= product.producto_descripcion %></td>
                                <td><%= product.producto_detalle %></td>
                                <td>$<%= product.producto_precio %></td>
                                <td><%= product.producto_stock %></td>
                                <td class="product_acciones">
                                    <a href="/details/<%= product.producto_id %>"><button class="productacc"><i class="fa-solid fa-circle-info"></i></button></a>
                                    <a href="/editproduct/<%= product.producto_id %>"><button class="productacc"><i class="fa-solid fa-square-pen"></i></button></a>
                                    <form action="/producto/eliminar/<%= product.producto_id %>" method="post" onsubmit="return confirm('¿Estás seguro de eliminar este producto?');">
                                        <button class="productacc" type="submit" class="btn-delete-product"><i class="fa-solid fa-trash-can"></i></button>
                                    </form>
                                </td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <%- include('../partials/footer.ejs') %>
</body>
</html>